webpackJsonp([1],{15:function(e,t,n){e.exports={dateFormat:function(e,t){function n(e){return e<10&&(e="0"+e),e}var r=e,i=r.getFullYear(),o=n(r.getMonth()+1),a=n(r.getDate()),s=n(r.getHours()),c=n(r.getMinutes()),l=n(r.getSeconds());return t.replace("yyyy",i).replace("MM",o).replace("dd",a).replace("HH",s).replace("mm",c).replace("ss",l)},objectAssign:function(e,t){for(var n in t)e[n]=t[n];return e}}},21:function(e,t,n){function r(){this.TABLE_CONSUMPTION="consumption"}var i=n(15),o=9,a="fit-car";r.prototype.index_date=["date"],r.prototype.keyRange={atMonth:function(e){return IDBKeyRange.bound([e[0]+"-01"],[e[0]+"-31"])}},r.prototype.open=function(e){var t=this,n=window.indexedDB.open(a,o);n.onerror=function(e){console.log(e.currentTarget.error.message)},n.onsuccess=function(t){var n=t.target.result;e(n)},n.onupgradeneeded=function(e){var n,r=e.target.result;if(r.objectStoreNames.contains(t.TABLE_CONSUMPTION)){var i=e.target.transaction;n=i.objectStore(t.TABLE_CONSUMPTION);for(var a=n.indexNames,s=0;s<a.length;s++)n.deleteIndex(a[s])}else n=r.createObjectStore(t.TABLE_CONSUMPTION,{autoIncrement:!0});n.createIndex("index_date",t.index_date,{unique:!1}),console.log("DB version changed to "+o)}},r.prototype.add=function(e,t){this.open(function(n){var r=n.transaction(e,"readwrite"),i=r.objectStore(e);"[object Array]"===Object.prototype.toString.apply(t)?t.forEach(function(e){i.add(e)}):i.add(t),n.close()})},r.prototype.save=function(e,t,n){this.open(function(r){var o=r.transaction(e,"readwrite"),a=o.objectStore(e),s=a.get(+t);s.onsuccess=function(e){var r=e.target.result;i.objectAssign(r,n),a.put(r,+t)}})},r.prototype.del=function(e,t){this.open(function(n){var r=n.transaction(e,"readwrite"),i=r.objectStore(e);t?i["delete"](+t):i.clear()})},r.prototype.get=function(e,t,n){this.open(function(r){var i=r.transaction(e,"readonly"),o=i.objectStore(e),a=o.get(+t);a.onsuccess=function(e){var t=e.target.result;n(t)}})},r.prototype.getList=function(e,t,n,r){this.open(function(i){var o,a=i.transaction(e,"readonly"),s=a.objectStore(e);if(n&&r){var c=s.index("index_"+n.join("_"));o=c.openCursor(r)}else o=s.openCursor();var l=[];o.onsuccess=function(e){var n=e.target.result;if(n){var r=n.value;r.id=n.primaryKey,l.push(r),n["continue"]()}else t(l),i.close()}})},e.exports=new r},60:function(e,t,n){t=e.exports=n(175)(),t.push([e.id,".file-wrap{position:relative;max-width:100%;min-width:150px}.file-wrap:hover{background-color:#fff}.file-field{position:absolute;width:100%;height:100%;left:0;top:0;opacity:0}.importType>label{text-align:left;margin:10px 0 10px 50px}",""])},175:function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},182:function(e,t,n){var r=n(1),i=n(20),o=i.NavBar,a=i.Icon,s=i.Group,c=i.List,l=i.View,p=i.Modal,u=i.Field,f=i.Notification,d=i.Container,h=n(21);n(295),e.exports=r.createClass({displayName:"module.exports",getInitialState:function(){return{showDialog:!1,noticeVisible:!1,imports:{file:null,type:1}}},importData:function(){this.setState({showDialog:!0})},exportData:function(){function e(e,t){var n=document.createElement("a"),r=new Blob([t]),i=document.createEvent("HTMLEvents");i.initEvent("click",!1,!1),n.download=e,n.href=URL.createObjectURL(r),n.dispatchEvent(i)}h.getList(h.TABLE_CONSUMPTION,function(t){e("fit.json",JSON.stringify(t))})},handleImportFileChange:function(e){this.state.imports.file=e.target.files[0],this.setState({imports:this.state.imports})},handleImportTypeChange:function(e){this.state.imports.type=e.target.value,this.setState({imports:this.state.imports})},handleAction:function(e){if(e){if(this.state.imports.file){var t=this,n=new FileReader;n.onload=function(){var e=JSON.parse(this.result);2==t.state.imports.type&&h.del(h.TABLE_CONSUMPTION),e.forEach(function(e){delete e.id,h.add(h.TABLE_CONSUMPTION,e)}),t.state.imports.file=null,t.state.showDialog=!1,t.state.noticeVisible=!0,t.setState(t.state)},n.readAsText(this.state.imports.file)}}else this.setState({showDialog:!1})},closeNotification:function(){this.setState({noticeVisible:!1})},render:function(){var e={title:"设置",amStyle:"primary",leftNav:[{icon:"left-nav",href:"#/index"}]};return r.createElement(d,{fill:!0,direction:"column"},r.createElement(f,{amStyle:"secondary",visible:this.state.noticeVisible,animated:!0,onDismiss:this.closeNotification},"导入完毕！"),r.createElement(o,r.__spread({},e)),r.createElement("div",{className:"views"},r.createElement(l,null,r.createElement(d,{fill:!0,scrollable:!0},r.createElement(s,{header:"数据",noPadded:!0,className:"margin-0"},r.createElement(c,null,r.createElement(c.Item,{media:r.createElement(a,{name:"download"}),onClick:this.importData,title:"导入",href:"javascript:;"}),r.createElement(c.Item,{media:r.createElement(a,{name:"share"}),onClick:this.exportData,title:"导出",href:"javascript:;"})),r.createElement(p,{title:"导入数据文件",role:"confirm",onAction:this.handleAction,isOpen:this.state.showDialog},r.createElement("div",{className:"btn btn-secondary btn-hollow margin-0 file-wrap text-truncate"},this.state.imports.file?this.state.imports.file.name:"请选择数据文件",r.createElement(u,{type:"file",className:"file-field",onChange:this.handleImportFileChange})),r.createElement("div",{className:"importType"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"type",value:"1",checked:1==this.state.imports.type,onChange:this.handleImportTypeChange})," 追加到原数据"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"type",value:"2",checked:2==this.state.imports.type,onChange:this.handleImportTypeChange})," 覆盖原数据"))))))))}})},294:function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(l(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(l(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],c=i[3],l={css:a,media:s,sourceMap:c};n[o]?n[o].parts.push(l):t.push(n[o]={id:o,parts:[l]})}return t}function o(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function c(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function l(e,t){var n,r,i;if(t.singleton){var o=y++;n=g||(g=s(t)),r=p.bind(null,n,o,!1),i=p.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=f.bind(null,n),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=u.bind(null,n),i=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function p(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function u(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a],c=d[s.id];c.refs--,o.push(c)}if(e){var l=i(e);r(l,t)}for(var a=0;a<o.length;a++){var c=o[a];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete d[c.id]}}}};var E=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},295:function(e,t,n){var r=n(60);"string"==typeof r&&(r=[[e.id,r,""]]);var i=n(294)(r,{});r.locals&&(e.exports=r.locals),r.locals||e.hot.accept(60,function(){var t=n(60);"string"==typeof t&&(t=[[e.id,t,""]]),i(t)}),e.hot.dispose(function(){i()})}});
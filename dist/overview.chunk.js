webpackJsonp([4],{15:function(e,t,n){e.exports={dateFormat:function(e,t){function n(e){return e<10&&(e="0"+e),e}var o=e,r=o.getFullYear(),a=n(o.getMonth()+1),i=n(o.getDate()),c=n(o.getHours()),l=n(o.getMinutes()),s=n(o.getSeconds());return t.replace("yyyy",r).replace("MM",a).replace("dd",i).replace("HH",c).replace("mm",l).replace("ss",s)},objectAssign:function(e,t){for(var n in t)e[n]=t[n];return e}}},21:function(e,t,n){function o(){this.TABLE_CONSUMPTION="consumption"}var r=n(15),a=9,i="fit-car";o.prototype.index_date=["date"],o.prototype.keyRange={atMonth:function(e){return IDBKeyRange.bound([e[0]+"-01"],[e[0]+"-31"])}},o.prototype.open=function(e){var t=this,n=window.indexedDB.open(i,a);n.onerror=function(e){console.log(e.currentTarget.error.message)},n.onsuccess=function(t){var n=t.target.result;e(n)},n.onupgradeneeded=function(e){var n,o=e.target.result;if(o.objectStoreNames.contains(t.TABLE_CONSUMPTION)){var r=e.target.transaction;n=r.objectStore(t.TABLE_CONSUMPTION);for(var i=n.indexNames,c=0;c<i.length;c++)n.deleteIndex(i[c])}else n=o.createObjectStore(t.TABLE_CONSUMPTION,{autoIncrement:!0});n.createIndex("index_date",t.index_date,{unique:!1}),console.log("DB version changed to "+a)}},o.prototype.add=function(e,t){this.open(function(n){var o=n.transaction(e,"readwrite"),r=o.objectStore(e);"[object Array]"===Object.prototype.toString.apply(t)?t.forEach(function(e){r.add(e)}):r.add(t),n.close()})},o.prototype.save=function(e,t,n){this.open(function(o){var a=o.transaction(e,"readwrite"),i=a.objectStore(e),c=i.get(+t);c.onsuccess=function(e){var o=e.target.result;r.objectAssign(o,n),i.put(o,+t)}})},o.prototype.del=function(e,t){this.open(function(n){var o=n.transaction(e,"readwrite"),r=o.objectStore(e);t?r["delete"](+t):r.clear()})},o.prototype.get=function(e,t,n){this.open(function(o){var r=o.transaction(e,"readonly"),a=r.objectStore(e),i=a.get(+t);i.onsuccess=function(e){var t=e.target.result;n(t)}})},o.prototype.getList=function(e,t,n,o){this.open(function(r){var a,i=r.transaction(e,"readonly"),c=i.objectStore(e);if(n&&o){var l=c.index("index_"+n.join("_"));a=l.openCursor(o)}else a=c.openCursor();var s=[];a.onsuccess=function(e){var n=e.target.result;if(n){var o=n.value;o.id=n.primaryKey,s.push(o),n["continue"]()}else t(s),r.close()}})},e.exports=new o},28:function(e,t,n){e.exports={gas:{name:"加油",icon:"info",color:"#B0D865"},park:{name:"停车",icon:"info",color:"#4384EB"},wash:{name:"洗车",icon:"info",color:"#3DB9EF"},maintain:{name:"保养",icon:"info",color:"#4DC23D"},fix:{name:"维修",icon:"info",color:"#F7731B"},breach:{name:"违章",icon:"info",color:"#FF6565"},road:{name:"过路",icon:"info",color:"#22BB9F"},others:{name:"其他",icon:"info",color:"#868BE8"}}},181:function(e,t,n){var o=n(1),r=n(20),a=r.NavBar,i=r.Icon,c=r.Group,l=r.List,s=r.View,u=r.Loader,d=r.Container,p=n(21),f=n(28);e.exports=o.createClass({displayName:"module.exports",getInitialState:function(){return{loading:!0,list:[]}},componentDidMount:function(){p.getList(p.TABLE_CONSUMPTION,function(e){e.sort(function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()}),this.setState({loading:!1,list:e})}.bind(this))},render:function(){if(this.state.loading)return o.createElement("div",{className:"loading"},o.createElement(u,{rounded:!0,amStyle:"primary"}));var e=[],t=0;if(this.state.list.length){var n,r,p="";this.state.list.forEach(function(o,a){if(n=o.date.slice(0,7),p!=n){p=n;for(var i in r)r[i].amount+=" 元",e.push(r[i]);e.push({title:p}),r={}}if(r[o.type]||(r[o.type]={name:f[o.type].name,icon:f[o.type].icon,color:f[o.type].color,amount:0}),r[o.type].amount+=+o.amount,t+=+o.amount,a==this.state.list.length-1)for(var i in r)r[i].amount+=" 元",e.push(r[i])}.bind(this))}var m={title:"花销总览（共 "+t+" 元）",amStyle:"primary",leftNav:[{icon:"left-nav",href:"#/index"}]};return o.createElement(d,{fill:!0,direction:"column"},o.createElement(a,o.__spread({},m)),o.createElement("div",{className:"views"},o.createElement(s,null,o.createElement(d,{fill:!0,scrollable:!0},o.createElement(c,{noPadded:!0,className:"margin-0"},e.length?o.createElement(l,null,e.map(function(e,t){return e.title?o.createElement(l.Item,{key:t,role:"header"},e.title):o.createElement(l.Item,{key:t,title:o.createElement("div",{style:{display:"flex",alignItems:"center"}},o.createElement(i,{name:e.icon,style:{color:e.color}}),o.createElement("span",null,e.name)),after:e.amount})})):o.createElement("h3",{className:"text-center padding-v-lg"},o.createElement(i,{name:"info"}),"没有数据！"))))))}})}});